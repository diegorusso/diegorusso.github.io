---
layout: post
status: publish
published: true
title: Having fun with micro:bit and micropython
author:
  display_name: diegor
  login: diegor
  email: me@diegor.it
  url: http://www.diegor.it
author_login: diegor
author_email: me@diegor.it
author_url: http://www.diegor.it
wordpress_id: 3668
wordpress_url: http://www.diegor.it/?p=3668
date: '2015-11-04 08:30:31 +0000'
date_gmt: '2015-11-04 08:30:31 +0000'
categories:
- programming
tags:
- python
- test
- sed
- microbit
- micropython
comments: []
---
<p>Last night I attended the usual <a href="http://www.meetup.com/CamPUG/">CamPUG</a> monthly meeting and the main topic was about micro:bit and micropython.</p>
<p><a href="{{site.url}}/images/IMG_6734.jpg"><img class="aligncenter wp-image-3670" src="{{site.url}}/images/IMG_6734.jpg" alt="IMG_6734" width="565" height="424" /></a></p>
<p>micro:bit is a board that BBC will distribute to every year 7 student in the UK (early 2016, roughly 1 million units) and it will be shipped with <a href="https://micropython.org">micropython</a> on it (<a href="http://www.arm.com/innovation/products/microbit.php">more info</a>). Hardware specs can be found <a href="https://www.microbit.co.uk/device">here</a>:&nbsp;it has a Cortex-M0, compass, accelerometer, 5x5 leds, bluetooth, uart, i2c, two buttons and other stuff you can use.</p>
<p><a href="{{site.url}}/images/IMG_6731.jpg"><img class="wp-image-3669 aligncenter" src="{{site.url}}/images/IMG_6731.jpg" alt="IMG_6731" width="505" height="379" /></a></p>
<p>In a such tiny tiny board you can run python... well&nbsp;<a href="https://micropython.org">micropython</a>, a&nbsp;fast implementation of the&nbsp;<a href="http://www.python.org/">Python 3</a>&nbsp;programming language that is optimised to run on a microcontroller.</p>
<p>So, what did we do? Once plugged the micro:bit to the USB, we can run python code through <a href="https://github.com/ntoll/microrepl">microrepl</a>, a&nbsp;script that lets you run commands directly onto a connected micro:bit device. Alternatively you can use&nbsp;the <a href="https://github.com/ntoll/upyed">browser&nbsp;based micro:bit editor</a>, and start programming directly in your browser. Very neat!</p>
<p>My group (Gareth and myself), after exploring, experimenting, and testing the APIs, decided to do something with the 5x5 leds available. This is the code we have written literllay in few minutes:</p>
<pre>import microbit     </p>
<p># It returns the brightness (0-9) depending on the position of the led<br />
def brightness(x, y, t):<br />
    return (x + y + t) % 10</p>
<p># Iterate the whole led matrix and set the pixel with the right brightness<br />
def get_image(t):<br />
    for x in range(0, 5):<br />
        for y in range(0, 5):<br />
            microbit.display.set_pixel(x,y, brightness(x,y,t))                           </p>
<p>t = 0  # time<br />
a = 1  # direction flag</p>
<p># Start looping<br />
while True:<br />
    get_image(t)  # Set all the leds<br />
    t += a  # Incrementing t<br />
    microbit.sleep(100)  # Let's wait some time<br />
    if microbit.button_a.is_pressed():  #Check if the user presses the button<br />
        a *= -1  # Revert the direction<br />
</pre><br />
This is what it does (in real time the effect is much better):</p>
<p><iframe width="560" height="315" src="https://www.youtube.com/embed/uUY6GCazcFQ" frameborder="0" allowfullscreen></iframe></p>
<p>And this is the slow motion:</p>
<p><iframe width="560" height="315" src="https://www.youtube.com/embed/Nvdc0jZPLb4" frameborder="0" allowfullscreen></iframe></p>
<p>When the user presses the button, it changes direction.</p>
<p>It has been very good fun and I'm sure kids will love it: it is straightforward to use it, pretty intuitive and microrepl is very easy to use (it has autocompletion)</p>
