---
layout: post
status: publish
published: true
title: 'HOWTO: "psycopg2 module: cannot import name tz"'
author:
  display_name: diegor
  login: diegor
  email: me@diegor.it
  url: http://www.diegor.it
author_login: diegor
author_email: me@diegor.it
author_url: http://www.diegor.it
wordpress_id: 2346
wordpress_url: http://www.diegor.it/?p=2346
date: '2010-03-27 11:58:48 +0000'
date_gmt: '2010-03-27 10:58:48 +0000'
categories:
- open source
- various links
- job
- howto
tags:
- howto
- python
- django
comments: []
---
<p>Gi&agrave; ho scritto a riguardo di&nbsp;<a href="http://www.diegor.it/2009/09/04/howto-snow-leopard-django-postgresql-psycopg2/">postgres + psycopg2 + django</a> e nell'utilizzo (dunque la compilazione &egrave; andata a buon fine) di <strong>psycopg2 con django </strong>puoi incappare in un errore del genere:</p>
<pre>raise ImproperlyConfigured("Error loading psycopg2 module: %s" % e)<br />
ImproperlyConfigured: Error loading psycopg2 module: cannot import name tz</pre><br />
Ho cercato molto in giro e non ho mai trovato una soluzione a questo errore, finch&eacute; la mia perseveranza  ha trovato un'uscita. Praticamente questo errore &egrave; scaturito poich&eacute; <strong>il tuo server non riesce a scrivere sul path PYTHON_EGG_CACHE e di conseguenza non pu&ograve; usare le eggs.</strong><br />
Il vero fix &egrave; per&ograve; nella configurazione del tuo <em>mod_python</em> o del <em>mod_wsgi</em>, in modo da configurare questo path.<br />
Per il <em>mod_wsgi</em>, modifica il file .wsgi del tuo progetto aggiungendoci questa riga:</p>
<pre>os.environ['PYTHON_EGG_CACHE'] = '/writable/path/.python-eggs'</pre><br />
Dove il path che vai ad inserire &egrave; scrivibile dall'utente che esegue il web server come, ad esempio, <strong>www-data.</strong></p>
<p>Per quanto riguarda <em>mod_python</em> segui questi due passaggi:</p>
<ol>
<li>Crea un piccolo modulo python <em>"eggs.py"</em> e mettici dentro queste due righe:
<pre>import os<br />
os.environ['PYTHON_EGG_CACHE'] = '/home/django/.python-eggs'</pre><br />
</li></p>
<li>Nel file del tuo virtualhost aggiungi le seguenti direttive:
<pre>PythonInterpreter my_django<br />
PythonImport /path/to/my/profile/eggs.py my_django</pre><br />
</li><br />
</ol><br />
Sia per <em>mod_wsgi</em> che per <em>mod_python</em>, a modifiche finite riavvia il tuo server web e controlla se tutto funziona correttamente.</p>
<p>Come al solito se hai domande, suggerimenti, critiche, altro... scrivimi oppure commenta il post! :)</p>
<p><em>Fonte: <a href="http://lethain.com/entry/2009/feb/13/when-psycopg2-can-t-import-tz/">lethain.com</a></em></p>
